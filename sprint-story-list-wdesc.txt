IBU-4429	4	101	13	Unassigned	Pfam alignment download	1. Configure the dev VM 2. Fix the download button 3. Document the VM setup Download from the alignments tab does not work. URL example http://pfam.xfam.org/family/PF02171/alignment/long/gzipped as reported by Henning and https://helpdesk.ebi.ac.uk/Ticket/Display.html?id=59653
IBU-4441	1	100	8	Siew-Yit Yong	Protein update: UniProt 2015_10	http://www.ebi.ac.uk/seqdb/confluence/display/PF/Protein+update {code:title=working directory} cd /ebi/production/interpro/production2/work/protein_update/run-2015-09-18 {code} # (/) Update uniparc.xref # (/) Refresh IPRSCAN.MV_IPRSCAN # (/) Disable crontab # (/) Copy the latest scripts from Git to production2 # (/) Setup # (/) Update1A.csh # (/) Refresh INTERPRO.METHOD2SWISS_DE # (/) Update1B.csh # (/) IPRSCAN check # (/) Dump UniProt annotation from SWPREAD # (/) Update2.csh # (/) Update3.csh # (/) Xref_summary.csh # (/) Refresh IPREADU # (/) Passing data from IPPRO to SIB # (/) Update Happy Helper manually # (/) Generate report for curators # (/) Enable crontab
IBU-4289	3	99	7	Simon Potter	HMMER database production	Fabian should show Simon how we build the hmmer databases.
IBU-3464	1	98	2	Gift Nuka	Integrate sanity checks into the new production pipeline (I5 driven pipeline)	
IBU-4376	4	97	8	Jaina Mistry	Pfam View process	After moving over to reference proteomes, there are a few bits that we need to be able to do. 1. Search against UniProt 2. Upload regions into table 3. Complete Clans 4. Update PDB mapping This needs to be integrated with existing view process.
IBU-3378	1	96	40	Gift Nuka	Migrate I5 to Java 8	1. Look at dependencies 2. Compile I5 with Java 8
IBU-4515	4	95	32	Unassigned	Family/Sequence relationship network viewing component	Development of a javascript viewing component for looking at family relationships e.g pfam clans and sequence relationships e.g within pfam families.
IBU-4438	2	95	36	Sebastien Pesseat	EMG Homepage improvements	There is a list of things that needs to happen, now that the new homepage is live: - update wastewater biome icon - private area to customise (remove unecessary elements) and check style is ok - review code and improve it (HTML, css and class name) - tweet about new features - tweeter widget: check if better solution to unskin it than using jquery timeout - use slider for tweets if we want to show more than jsut the last tweet - TARA and comparison box contents vs same height ? - improve responsive design for homepage (remove feedback button and move it bottom page content + menu collapse + number overlapping for stats) - play around with subbanner/jumbo header color - find google chart code (style update) or implement it again - EBI compliance effort (header/footer)
IBU-4377	4	94	20	Matloob Qureshi	Pfam Wikipedia - check UTF8 chars	Currently all UTF-8 chars are being mangled on the Pfam site. E.g. beta become un-readable chars. I believe this is because the table types are wrong. Investigate and fix.
IBU-4399	1	93	5	Gift Nuka	Investigate fingerprintscan error	We've very recently had several interhelp requests with failures with fingerprintscan (e.g. #45939). We've been unable to replicate this. Simon has built a new fingerprintscan binary (same version) and sent this to a couple of users to see if it helps. Error in parsing the output - see below. 2015-08-23 20:11:31,900 [uk.ac.ebi.interpro.scan.jms.worker.LocalJobQueueListener:192] ERROR - Execution thrown when attempting to executeInTransaction the StepExecution. All database activity rolled back. java.lang.ArrayIndexOutOfBoundsException: 10 at uk.ac.ebi.interpro.scan.io.match.prints.PrintsMatchParser.parse(PrintsMatchParser.java:78) at uk.ac.ebi.interpro.scan.management.model.implementations.prints.ParsePrintsOutputStep.execute(ParsePrintsOutputStep.java:74)
IBU-4450	1	92	72	Siew-Yit Yong	InterPro release procedures: InterPro 54.0	h2. Please refer to the instructions here: http://www.ebi.ac.uk/seqdb/confluence/display/PF/How+to+do+an+InterPro+Release This issue links to a set of template issues for running the InterPro release. You can clone these to keep track of the release procedures. Please change the labels to whatever release number you are running. For examples, InterPro_43.1. You can do this by doing a search and creating a filter that finds issues that have been created in the last 10 min or so. Then, do "bulk change" to edit the label.
IBU-4437	2	91	13	Unassigned	Sort out missing/zero-sized files in EMG pipeline	Alex has reported some pipeline runs where files have been missing/empty. There are several approaches - may need to be combined, e.g. - Each step in the pipeline to check that all expected files are written as it completes - Initialisation step to check more than just lock/success/key files - Check for success as files are written (e.g. check return status of system calls?) - Sanity check run post-run (or as a step in pipeline, or during upload?) to check all files are as expected
IBU-3926	4	89	4	Matloob Qureshi	Pfam-Wikipedia synchronisation	The Pfam-wikipedia synchonisation code is no longer working and needs to be fixed. Sprint 71 - tasks 1-4
IBU-3102	1	88	8	Unassigned	Zero e-values for pre-calc PANTHER and SUPERFAMILY matches in the I5 result files (TSV,XML,GFF3)	Just to summarise: Onion and the BerkeleyDB are fine. The BerkeleyDB doesn't contain the scores but definitely the e-values. Therefore the lookup services is fine as well and returns e-values for PANTHER matches. It is a bug in the BerkeleyMatchConverter implementations of Panther and Superfamily uk.ac.ebi.interpro.scan.precalc.berkeley.conversion.toi5.fromonion.PantherBerkeleyMatchConverter uk.ac.ebi.interpro.scan.precalc.berkeley.conversion.toi5.fromonion.SuperfamilyMatchConverter The converters need to consider the e-values as well. Implement and test that. Edit - note that there are comments against this JIRA to consider!
IBU-3685	5	86	20	Unassigned	InterPro web text search - switch from SOAP to REST services	The web production team want to remove support for the EBI search SOAP web services. The InterPro website currently uses the SOAP web services and will need to switch to use their REST services instead. http://www.ebi.ac.uk/Tools/webservices/services/eb-eye_rest Deadline - end of Dec 2015
IBU-3437	1	85	5	Gift Nuka	Create MV table with Fast Refresh	The current query to create the MV_IPRSCAN table that is used to update matches on IPPRO is not efficient. It takes over 6 hours. We can improve performance by updating the query to create the materialised view with fast refresh. However, since we have joins and UNION ALL in the query this is not straight forward and requires investigation and experimentation. 1. Create the MV table logs 'WITH ROWID, SEQUENCE INCLUDING NEW VALUES' CREATE MATERIALIZED VIEW LOG ON IPRSCAN.PROTEIN_XREF WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.SIGNATURE WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.SIGNATURE_LIBRARY_RELEASE WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.BLAST_PRODOM_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.BLAST_PRODOM_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.COILS_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.COILS_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.FINGER_PRINTS_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.FINGER_PRINTS_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.HMMER2_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.HMMER2_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.HMMER3_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.HMMER3_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.PANTHER_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.PANTHER_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.PATTERN_SCAN_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.PATTERN_SCAN_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.PHOBIUS_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.PHOBIUS_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.PROFILE_SCAN_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.PROFILE_SCAN_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.TMHMM_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.TMHMM_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.SUPER_FAMILY_HMMER3MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.SUPERFAMILYHMMER3_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.SIGNALP_MATCH WITH ROWID, SEQUENCE INCLUDING NEW VALUES; CREATE MATERIALIZED VIEW LOG ON IPRSCAN.SIGNALP_LOCATION WITH ROWID, SEQUENCE INCLUDING NEW VALUES; 2. Example sql to create the MV_IPRSCAN table (this is not exactly correct as it leaves out the release_iprscan table which is in IPPRO) - should conform to the restrictions on Fast Refreshable MV tables that involve complex queries with UNION ALL and joins CREATE MATERIALIZED VIEW IPRSCAN.MV_IPRSCAN_FF2 PARALLEL PARTITION BY LIST ("ANALYSIS_ID") (PARTITION "TMHMM" VALUES (1), PARTITION "COILS" VALUES (2), PARTITION "PFAM" VALUES (4), PARTITION "PRINTS" VALUES (5), PARTITION "GENE3D" VALUES (6), PARTITION "HAMAP" VALUES (7), PARTITION "PROSITE_PATTERNS" VALUES (19), PARTITION "PROSITE_PROFILES" VALUES (20), PARTITION "PIRSF" VALUES (21), PARTITION "PRODOM" VALUES (11), PARTITION "PANTHER" VALUES (12), PARTITION "TIGRFAM" VALUES (13), PARTITION "SMART" VALUES (14), PARTITION "SUPERFAMILY" VALUES (15), PARTITION "SIGNALP_EUK" VALUES (16), PARTITION "SIGNALP_GRAM_POSITIVE" VALUES (17), PARTITION "SIGNALP_GRAM_NEGATIVE" VALUES (18), PARTITION "PHOBIUS" VALUES (3), PARTITION "OTHER" VALUES (DEFAULT) ) REFRESH FAST ON DEMAND AS SELECT s.signature_library_release_id analysis_id, px.identifier upi, s.accession method_ac, hl.loc_start seq_start, hl.loc_end seq_end, cast(null as number) hmm_start, cast(null as number) hmm_end, cast(null as number) hmm_length, cast(null as VARCHAR2(25 CHAR)) hmm_bounds, hl.score, cast(null as BINARY_DOUBLE) seqscore, hl.evalue, cast(null as BINARY_DOUBLE) seqevalue, cast(null as number) envelope_start, cast(null as number) envelope_end, px.rowid as px_rowid, s.rowid as s_rowid, hm.rowid as hm_rowid, hl.rowid as hl_rowid, 1 as marker FROM IPRSCAN.protein_xref px, IPRSCAN.signature s, IPRSCAN.blast_prodom_match hm, IPRSCAN.blast_prodom_location hl WHERE hm.protein_id = px.protein_id AND hm.signature_id = s.id AND hl.match_id = hm.id UNION ALL SELECT s.signature_library_release_id analysis_id, px.identifier upi, s.accession method_ac, hl.loc_start seq_start, hl.loc_end seq_end, cast(null as number) hmm_start, cast(null as number) hmm_end, cast(null as number) hmm_length, cast(null as VARCHAR2(25 CHAR)) hmm_bounds, cast(null as BINARY_DOUBLE) score, cast(null as BINARY_DOUBLE) seqscore, cast(null as BINARY_DOUBLE) evalue, cast(null as BINARY_DOUBLE) seqevalue, cast(null as number) envelope_start, cast(null as number) envelope_end, px.rowid as px_rowid, s.rowid as s_rowid, hm.rowid as hm_rowid, hl.rowid as hl_rowid, 2 as marker FROM IPRSCAN.protein_xref px, IPRSCAN.signature s, IPRSCAN.coils_match hm, IPRSCAN.coils_location hl WHERE hm.protein_id = px.protein_id AND hm.signature_id = s.id AND hl.match_id = hm.id
IBU-4440	2	84	5	Unassigned	ENA xrefs: Create cron job which generates an updated list of EMG samples	Create a cron job to dump sample accessions to an FTP server
IBU-4032	2	83	13	Maxim Scheremetjew	Add cleaning and compression modules to the analysis pipeline	
IBU-4292	2	82	4	Sebastien Pesseat	Too many people think EMG taxonomy is only phylum	(/) Meet with Rob to discuss what is needed. () Create a branch () Make the Krona chart the default one () Add a text line under the pie/bar/satcked chart to explain that they should "This view is just aggregating the taxonomy info at the domain and phylum level, you need to click here to see the full detailed taxonomy distribution"
IBU-4400	2	81	13	Unassigned	Update EMG web uploader to cope with the new biome and experiment type tables	1. First setup the dev space The meta data webuploader needs to be updated to cope with the model changes.
IBU-4547	2	80	1	Unassigned	Sprint 75 disruption	
IBU-4516	4	80	8	Unassigned	IPfam servers to EBI (stage only)	
IBU-4372	1	80	1	Matthew Fraser	CDD and PIRSR - plan how to deal with per residue annotations [timeboxed]	Both CDD and PIRSR contain individual per site annotations, related to a signature. We need to think how we are going to stores this in the InterPro database and site XML. I would also like you to consider how we deal with multi-part domain/family assignments as part of this. We have known examples in Pfam, SUPERFAMILY, Gene3D and now PANTHER. We will need to tackle this - but not implement yet. There is a confluence page about dealing with PIRSR written in 2012: http://www.ebi.ac.uk/seqdb/confluence/display/PF/PIRSR+%28Site+Rule%29+XML+Format+Design
IBU-4373	2	79	-	Unassigned	Monitoring tool	Development of prototype 1. Deploy on a fixed machine 2. Change code to fetch data via a centralised cron job 3. Add users to the table 4. Allow simple filtering of tables Feature Creep 1. Run a nightly search to allow us to fetch outstanding jobs in ENA 2. Cross reference against EMGPRO and black-list 3. Fetch projects/sample so we can display and filter according to expt type, size, EMG account holder, private/public. 4. Only show pending and running jobs, not everything we have done 5. Think about what would be need to trigger off download automatically.
IBU-4366	1	78	-	Matthew Fraser	Remove InterPro Biomart and DAS from existence	InterPro Biomart and InterPro DAS were stopped in IBU-4077. If users complain and we have to quickly restart we can. However if not, then we can finish up removing the remaining configuration for these services! E.g. Nagios messages, load balancer config, Tomcat files, VMs etc
IBU-4334	2	77	-	Unassigned	Deal with memory usage in global summary	EMG pipeline assigns memory for the global summary based on sample, i.e. size of fastq file. For some TARA samples (>= ~90Gb, though thankfully most of the remaining TARA are much smaller) this is an insane memory requirement and means using only a subset of the farm. LSF logs (those that aren't deleted...) may reveal where the bottlenecks are. There's also the 'resource' python module which can give stats for the current process.
IBU-4444	2	75	-	Unassigned	Cleaning up remaining tasks from Sprint74	
IBU-3424	1	74	-	Unassigned	Add un-integrated signatures to the match lookup service (Berkeley DB build)	SignalP, TMHMM, Phobius etc are not included in the match lookup at the moment. This is due to the fact that the Berkeley DB was build with Onion so far, which didn't had any matches pre-calculated for those. With IPRSCAN it is different now and we do have pre-calculated matches for those analysis in place.
IBU-3812	4	60	-	Unassigned	Pfam/InterPro curation editor	Scope of this story is to produce a new web page for curation.
IBU-3720	2	29	-20	Maxim Scheremetjew	Clean EMG disk space retrospectively	This involves deleting unnecessary files and compressing FASTA, FASTQ and TSV (I5 output) formatted files. We've got an email from system asking us to make some space on the nfs production area. Discuss if we can reduce the amount of space we are using, for instance sequence data file compression, deletion pipeline input files, which are archived in ENA. https://docs.google.com/drawings/d/1NRxImaYpb7GZP0tNijl1Z4UWnYfMl49zmZAGmNqeZzk/edit?usp=sharing Retro: https://www.ebi.ac.uk/metagenomics/projects/ERP001736/samples/ERS489087/runs/ERR599141/results/versions/2.0#ui-id-10 Remaing tasks: (-) Find the right chunking settings for the 2 remaing FASTA files (-) Run scripts (-) Investigate line number issue for cds_unannotated_faa files (sanity check: #seq_obj * 2 = #lines, but not for those files) (-) Apply web app adjustments for FASTA files (like for I5 results) (-) Run some sanity checks (-) Delete original files (-) Produce stats for Rob to say how much disk space we have been released

